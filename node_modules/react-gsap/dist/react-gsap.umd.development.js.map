{"version":3,"file":"react-gsap.umd.development.js","sources":["../src/types.ts","../src/helper.ts","../src/Provider.tsx","../src/plugins/PlugInSvgDraw.ts","../src/plugins/PlugInCount.ts","../src/Tween.tsx","../src/Timeline.tsx","../src/tools/Reveal.tsx","../src/tools/ScrollTrigger.tsx","../src/tools/SplitText.tsx","../src/tools/Controls.tsx"],"sourcesContent":["export enum PlayState {\n  play = 'play',\n  restart = 'restart',\n  reverse = 'reverse',\n  restartReverse = 'restartReverse',\n  stop = 'stop',\n  stopEnd = 'stopEnd',\n  pause = 'pause',\n  resume = 'resume',\n}\n","import { gsap } from 'gsap';\nimport React from 'react';\nimport { PlayState } from './types';\nimport { TimelineProps } from 'Timeline';\nimport { TweenProps } from 'Tween';\nimport { ContextProps } from 'Provider';\n\nif (!String.prototype.startsWith) {\n  String.prototype.startsWith = function(searchString, position) {\n    position = position || 0;\n    return this.indexOf(searchString, position) === position;\n  };\n}\n\nconst setPlayState = (\n  playState?: PlayState,\n  prevPlayState?: PlayState | null,\n  tween: any = null\n) => {\n  if (tween && playState && playState !== prevPlayState) {\n    if (playState === PlayState.play) {\n      tween.play();\n    } else if (playState === PlayState.restart) {\n      tween.restart(true);\n    } else if (playState === PlayState.reverse) {\n      tween.reverse();\n    } else if (playState === PlayState.restartReverse) {\n      tween.reverse(0);\n    } else if (playState === PlayState.stop) {\n      tween.pause(0);\n    } else if (playState === PlayState.stopEnd) {\n      tween.reverse(0);\n      tween.pause();\n    } else if (playState === PlayState.pause) {\n      tween.pause();\n    } else if (playState === PlayState.resume) {\n      tween.resume();\n    }\n  }\n};\n\nconst setInitialPlayState = (tweenOrTimeline: any, props: TimelineProps | TweenProps) => {\n  const { playState } = props;\n  if (playState) {\n    setPlayState(playState, PlayState.play, tweenOrTimeline);\n  }\n};\n\nconst getInitialPaused = (playState?: PlayState) => {\n  return (\n    playState &&\n    (playState === PlayState.stop ||\n      playState === PlayState.stopEnd ||\n      playState === PlayState.pause)\n  );\n};\n\nconst getTweenFunction = (\n  targets: any,\n  props: TweenProps | TimelineProps,\n  context?: ContextProps\n): gsap.core.Tween | gsap.core.Timeline => {\n  const {\n    children,\n    wrapper,\n\n    duration = 1,\n    from,\n    to,\n\n    stagger,\n\n    progress,\n    totalProgress,\n    playState,\n    disabled,\n    onlyInvalidateTo,\n\n    onCompleteAll,\n    onCompleteAllParams,\n    onCompleteAllScope,\n    onStartAll,\n\n    position,\n    target,\n\n    ...vars\n  } = props;\n\n  let tweenFunction: gsap.core.Tween | gsap.core.Timeline;\n  const paused = getInitialPaused(playState);\n  const plugins = context?.getPlugins(context?.plugins, targets) ?? {};\n\n  if (from && to) {\n    // special props like paused always go in the toVars parameter\n    tweenFunction = gsap.fromTo(targets, from, {\n      stagger,\n      duration,\n      paused,\n      ...to,\n      ...vars,\n      ...plugins,\n    });\n  } else if (to) {\n    tweenFunction = gsap.to(targets, { stagger, duration, paused, ...to, ...vars, ...plugins });\n  } else {\n    tweenFunction = gsap.from(targets, { stagger, duration, paused, ...from, ...vars, ...plugins });\n  }\n\n  // if multiple tweens (stagger), wrap them in a timeline\n  // TODO: if it's already an timeline add event handlers\n  if (Array.isArray(tweenFunction)) {\n    tweenFunction.forEach(t => {\n      t.paused(false);\n    });\n    tweenFunction = gsap.timeline({\n      ...vars,\n      tweens: tweenFunction,\n      smoothChildTiming: true,\n      onComplete: onCompleteAll,\n      onCompleteParams: onCompleteAllParams,\n      onCompleteScope: onCompleteAllScope,\n      onStart: onStartAll,\n    });\n  }\n\n  return tweenFunction;\n};\n\nconst callTweenFunction = (\n  tweenFunction: any,\n  functionName: string,\n  params: Array<any> | undefined = undefined,\n  returnFunction: string | undefined = undefined\n): void => {\n  if (Array.isArray(tweenFunction)) {\n    tweenFunction.forEach(tween => {\n      if (!params && returnFunction) {\n        params = [tween[returnFunction].apply(tween)];\n      }\n      tween[functionName].apply(tween, params);\n    });\n  } else {\n    if (!params && returnFunction) {\n      params = [tweenFunction[returnFunction].apply(tweenFunction)];\n    }\n    tweenFunction[functionName].apply(tweenFunction, params);\n  }\n};\n\nconst isEqual = (obj1: any, obj2: any) => {\n  // very easy equal check\n  // attention: if the order of properties are different it returns false\n  return JSON.stringify(obj1) === JSON.stringify(obj2);\n};\n\nconst refOrInnerRef = (child: any) => {\n  if (child.type.$$typeof && child.type.$$typeof.toString() === 'Symbol(react.forward_ref)') {\n    return 'ref';\n  }\n\n  // styled-components < 4\n  if (child.type.styledComponentId) {\n    return 'innerRef';\n  }\n\n  return 'ref';\n};\n\nfunction isElement(element: any) {\n  return React.isValidElement(element);\n}\n\nfunction isDOMTypeElement(element: any) {\n  return isElement(element) && typeof element.type === 'string';\n}\n\n// https://stackoverflow.com/a/39165137\nfunction getReactNode(dom: any, traverseUp = 0) {\n  const key = Object.keys(dom ?? {}).find(\n    key => key.startsWith('__reactInternalInstance$') || key.startsWith('__reactFiber$')\n  );\n\n  const domFiber = key && dom[key];\n  if (!domFiber) return null;\n\n  // react <16\n  if (domFiber._currentElement) {\n    let compFiber = domFiber._currentElement._owner;\n    for (let i = 0; i < traverseUp; i++) {\n      compFiber = compFiber._currentElement._owner;\n    }\n    return compFiber._instance;\n  }\n\n  // react 16+\n  if (domFiber.stateNode) {\n    return domFiber.stateNode;\n  }\n\n  const getCompFiber = (fiber: any) => {\n    //return fiber._debugOwner; // this also works, but is __DEV__ only\n    let parentFiber = fiber.return;\n    while (typeof parentFiber.type == 'string') {\n      parentFiber = parentFiber.return;\n    }\n    return parentFiber;\n  };\n  let compFiber = getCompFiber(domFiber);\n  for (let i = 0; i < traverseUp; i++) {\n    compFiber = getCompFiber(compFiber);\n  }\n  return compFiber.stateNode;\n}\n\nconst getRefProp = (child: any, addTarget: (target: any) => void) => {\n  // has to be tested if it works, which lib does still use innerRef?\n  if (child.props.innerRef) {\n    return {\n      innerRef: (target: any) => {\n        addTarget(target);\n        const { innerRef } = child.props;\n        if (typeof innerRef === 'function') innerRef(target);\n        else if (innerRef) innerRef.current = target;\n      },\n    };\n  }\n\n  return {\n    ref: (target: any) => {\n      addTarget(target);\n      const { ref } = child;\n      if (typeof ref === 'function') ref(target);\n      else if (ref) ref.current = target;\n    },\n  };\n};\n\nconst setOrAddTarget = (\n  target: any,\n  setTarget: (key: string, target: any) => void,\n  addTarget: (target: any) => void\n) => {\n  const reactNode = getReactNode(target);\n\n  if (reactNode) {\n    addTarget(reactNode);\n  } else if (target) {\n    Object.keys(target).forEach(key => {\n      const elementRef = target[key];\n      if (typeof elementRef === 'object' && elementRef.current) {\n        if (Array.isArray(elementRef.current)) {\n          elementRef.current.forEach((singleRef: React.RefObject<any>) => {\n            setTarget(key, singleRef);\n          });\n        } else {\n          setTarget(key, elementRef.current);\n        }\n      }\n    });\n  }\n};\n\nconst getTargetRefProp = (\n  child: any,\n  setTarget: (key: string, target: any) => void,\n  addTarget: (target: any) => void\n) => {\n  // has to be tested if it works, which lib does still use innerRef?\n  if (child.props.innerRef) {\n    return {\n      innerRef: (target: any) => {\n        setOrAddTarget(target, setTarget, addTarget);\n        // merge refs\n        const { innerRef } = child.props;\n        if (typeof innerRef === 'function') innerRef(target);\n        else if (innerRef) innerRef.current = target;\n      },\n    };\n  }\n\n  return {\n    ref: (target: any) => {\n      setOrAddTarget(target, setTarget, addTarget);\n      // merge refs\n      const { ref } = child;\n      if (typeof ref === 'function') ref(target);\n      else if (ref) ref.current = target;\n    },\n  };\n};\n\nconst nullishCoalescing = <T, R>(value: T, ifNullish: R): T | R => {\n  if (value === null || typeof value === 'undefined') {\n    return ifNullish;\n  }\n  return value;\n};\n\nconst setProps = (\n  tweenOrTimeline: any,\n  props: TimelineProps | TweenProps,\n  prevProps?: TimelineProps | TweenProps\n) => {\n  if (props.progress !== undefined && props.progress !== prevProps?.progress) {\n    tweenOrTimeline.progress(props.progress);\n  }\n  if (props.totalProgress !== undefined && props.totalProgress !== prevProps?.totalProgress) {\n    tweenOrTimeline.totalProgress(props.totalProgress);\n  }\n  if (\n    tweenOrTimeline.duration !== undefined &&\n    props.duration &&\n    props.duration !== prevProps?.duration\n  ) {\n    tweenOrTimeline.duration(props.duration);\n  }\n};\n\nexport {\n  getTweenFunction,\n  callTweenFunction,\n  setPlayState,\n  isEqual,\n  refOrInnerRef,\n  getRefProp,\n  getTargetRefProp,\n  nullishCoalescing,\n  setProps,\n  setInitialPlayState,\n  getInitialPaused,\n};\n","import React from 'react';\n\ntype RegisteredPlugins = 'scrollTrigger';\ntype Plugin = (targets: any) => any;\ntype Plugins = { [key in RegisteredPlugins]: Plugin } | {};\n\nexport type ContextProps = {\n  registerConsumer: (consumer: any) => void;\n  plugins?: Plugins;\n  getPlugins: (plugins?: Plugins, targets?: any) => any;\n};\n\nexport const Context = React.createContext<ContextProps>({\n  registerConsumer: () => {},\n  getPlugins: () => {},\n  plugins: {},\n});\n\nabstract class Provider<T, S = {}> extends React.Component<T, S> {\n  static contextType = Context;\n\n  consumers: any[];\n  plugins?: Plugins;\n\n  constructor(props: T) {\n    super(props);\n    this.consumers = [];\n    this.plugins = {};\n\n    this.registerConsumer = this.registerConsumer.bind(this);\n    this.getContextValue = this.getContextValue.bind(this);\n    this.getPlugin = this.getPlugin.bind(this);\n    this.getPlugins = this.getPlugins.bind(this);\n    this.renderWithProvider = this.renderWithProvider.bind(this);\n  }\n\n  registerConsumer(consumer: any) {\n    this.consumers.push(consumer);\n  }\n\n  getContextValue(plugin: Plugins = {}) {\n    return {\n      registerConsumer: this.registerConsumer,\n      // plugins: { ...this.context.plugins, ...plugin },\n      plugins: plugin,\n      getPlugins: this.getPlugins,\n    };\n  }\n\n  getPlugin(props: any, targets: any) {\n    return {};\n  }\n\n  getPlugins(plugins?: Plugins, targets?: any) {\n    return Object.keys(plugins ?? {}).reduce((acc, plugin) => {\n      if (Object.prototype.hasOwnProperty.call(plugins, plugin)) {\n        // @ts-ignore\n        return { ...acc, [plugin]: this.getPlugin(plugins[plugin], targets) };\n      }\n      return acc;\n    }, {});\n  }\n\n  renderWithProvider(output: any, plugin?: Plugins) {\n    return <Context.Provider value={this.getContextValue(plugin)}>{output}</Context.Provider>;\n  }\n}\n\nexport default Provider;\n","import { nullishCoalescing } from '../helper';\n\nlet gsap: any;\nlet _interpolate: any;\nlet _getProp: any;\nconst _getGSAP = () =>\n  gsap || (typeof window !== 'undefined' && (gsap = window.gsap) && gsap.registerPlugin && gsap);\n\ntype Point = {\n  x: number;\n  y: number;\n};\n\nfunction getDistance(p1: DOMPoint | Point, p2: DOMPoint | Point) {\n  return Math.sqrt(Math.pow(p2.x - p1.x, 2) + Math.pow(p2.y - p1.y, 2));\n}\n\nfunction getCircleLength(el: SVGCircleElement) {\n  return 2 * Math.PI * parseFloat(nullishCoalescing(el.getAttribute('r'), '1') || '0');\n}\n\nfunction getRectLength(el: SVGRectElement) {\n  return (\n    parseFloat(nullishCoalescing(el.getAttribute('width'), '1') || '0') * 2 +\n    parseFloat(nullishCoalescing(el.getAttribute('height'), '1') || '0') * 2\n  );\n}\n\nfunction getLineLength(el: SVGLineElement) {\n  return getDistance(\n    {\n      x: parseFloat(nullishCoalescing(el.getAttribute('x1'), '1') || '0'),\n      y: parseFloat(nullishCoalescing(el.getAttribute('y1'), '1') || '0'),\n    },\n    {\n      x: parseFloat(nullishCoalescing(el.getAttribute('x2'), '1') || '0'),\n      y: parseFloat(nullishCoalescing(el.getAttribute('y2'), '1') || '0'),\n    }\n  );\n}\n\nfunction getPolylineLength(el: SVGPolylineElement) {\n  const points = el.points;\n  let totalLength = 0;\n  let previousPos: DOMPoint | undefined = undefined;\n  for (let i = 0; i < points.numberOfItems; i++) {\n    const currentPos = points.getItem(i);\n    if (previousPos) totalLength += getDistance(previousPos, currentPos);\n    previousPos = currentPos;\n  }\n  return totalLength;\n}\n\nfunction getPolygonLength(el: SVGPolylineElement) {\n  const points = el.points;\n  return (\n    getPolylineLength(el) + getDistance(points.getItem(points.numberOfItems - 1), points.getItem(0))\n  );\n}\n\n// if path is splitted into multiple move commands then return longest path\nfunction getPathLength(el: SVGPathElement) {\n  if (!el.hasAttribute('d')) {\n    return el.getTotalLength();\n  }\n  const d = el.getAttribute('d');\n  const pathString = d ? d.replace(/m/gi, 'M') : null;\n\n  if (!pathString) {\n    return el.getTotalLength();\n  }\n\n  const paths = pathString\n    .split('M')\n    .filter(path => path !== '')\n    .map(path => `M${path}`);\n\n  if (paths.length === 1) {\n    return el.getTotalLength();\n  }\n\n  let maxLength = 0;\n\n  paths.forEach(path => {\n    const pathElement = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n    pathElement.setAttribute('d', path);\n    maxLength = Math.max(maxLength, pathElement.getTotalLength());\n  });\n\n  return maxLength;\n}\n\nfunction getTotalLength(el: any) {\n  if (el.getTotalLength) {\n    return getPathLength(el);\n  }\n  switch (el.tagName.toLowerCase()) {\n    case 'circle':\n      return getCircleLength(el);\n    case 'rect':\n      return getRectLength(el);\n    case 'line':\n      return getLineLength(el);\n    case 'polyline':\n      return getPolylineLength(el);\n    case 'polygon':\n      return getPolygonLength(el);\n    default:\n      return 0;\n  }\n}\n\nexport const SvgDrawPlugin = {\n  version: '2.0.0',\n  name: 'svgDraw',\n  register(core: any, Plugin: any, propTween: any) {\n    gsap = core;\n    _interpolate = gsap.utils.interpolate;\n    _getProp = gsap.getProperty;\n  },\n  init(target: any, value: number, _tween: any, index: number, targets: any) {\n    const length = getTotalLength(target);\n\n    let lengthParam = value;\n    let offsetParam = 0;\n\n    if (Array.isArray(value)) {\n      lengthParam = value[0];\n      if (value.length >= 2) {\n        offsetParam = value[1] * -1;\n      }\n    }\n\n    let data = this;\n    data.target = target;\n    data.strokeDashoffset = _interpolate(\n      _getProp(target, 'stroke-dashoffset'),\n      length * offsetParam\n    );\n    data.strokeDasharray = _interpolate(_getProp(target, 'stroke-dasharray'), [\n      lengthParam * length,\n      length,\n    ]);\n  },\n  render(progress: number, data: any) {\n    data.target.setAttribute('stroke-dashoffset', data.strokeDashoffset(progress));\n    data.target.setAttribute('stroke-dasharray', data.strokeDasharray(progress));\n  },\n};\n\n_getGSAP() && gsap.registerPlugin(SvgDrawPlugin);\n\nexport { SvgDrawPlugin as default };\n","import { nullishCoalescing } from '../helper';\n\nlet gsap: any;\nlet _interpolate: any;\nlet _format: any;\nconst _getGSAP = () =>\n  gsap || (typeof window !== 'undefined' && (gsap = window.gsap) && gsap.registerPlugin && gsap);\n\ntype Prop =\n  | {\n      value: string | number;\n      format: () => (value: string | number) => number | string;\n    }\n  | number\n  | string;\n\nexport const CountPlugin = {\n  version: '1.0.0',\n  name: 'count',\n  register(core: any, Plugin: any, propTween: any) {\n    gsap = core;\n    _interpolate = gsap.utils.interpolate;\n    _format = (value: string | number) => parseInt(value.toString(), 10);\n  },\n  init(target: any, value: Prop, _tween: any, index: number, targets: any) {\n    let inputValue = value;\n    let format = _format;\n    if (typeof value === 'object') {\n      inputValue = nullishCoalescing(value.value, 0);\n      if (value.format) {\n        format = value.format;\n      }\n    }\n\n    const initialCount = parseFloat(target.innerText);\n\n    let data = this;\n    data.target = target;\n    data.count = _interpolate(initialCount, parseFloat(inputValue.toString()));\n    data.format = format;\n  },\n  render(progress: number, data: any) {\n    data.target.innerText = data.format(data.count(progress));\n  },\n};\n\n_getGSAP() && gsap.registerPlugin(CountPlugin);\n\nexport { CountPlugin as default };\n","import React, { Fragment, ReactElement } from 'react';\nimport { gsap } from 'gsap';\nimport { PlayState } from './types';\nimport {\n  getTweenFunction,\n  setPlayState,\n  isEqual,\n  getRefProp,\n  setProps,\n  setInitialPlayState,\n} from './helper';\nimport { Context } from './Provider';\n\nimport SvgDrawPlugin from './plugins/PlugInSvgDraw';\nimport CountPlugin from './plugins/PlugInCount';\n\n// @ts-ignore\ngsap.registerPlugin(SvgDrawPlugin);\n\n// @ts-ignore\ngsap.registerPlugin(CountPlugin);\n\ntype StaggerFunction = (index: number, target: any, list: any) => number;\ntype StaggerFromValues = 'start' | 'center' | 'edges' | 'random' | 'end';\ntype EaseFunction = (value: number) => number;\n\nexport type Stagger =\n  | {\n      amount?: number;\n      each?: number;\n      from?: StaggerFromValues | number | [number, number];\n      grid?: [number, number] | 'auto';\n      axis?: 'x' | 'y';\n      ease?: string | EaseFunction;\n      repeat?: number;\n      yoyo?: boolean;\n      [prop: string]: any;\n    }\n  | number\n  | StaggerFunction;\n\nexport type TweenProps = {\n  /** One or multiple \"refable\" components  */\n  children?: React.ReactNode;\n  wrapper?: React.ReactElement;\n  target?: number | string;\n  position?: string | number;\n\n  from?: any;\n  to?: any;\n  stagger?: Stagger;\n\n  duration?: number;\n  progress?: number;\n  totalProgress?: number;\n  playState?: PlayState;\n\n  disabled?: boolean;\n  onlyInvalidateTo?: boolean;\n\n  [prop: string]: any;\n};\n\nclass Tween extends React.Component<TweenProps, {}> {\n  static displayName = 'Tween';\n  static contextType = Context;\n\n  tween: any;\n  targets: any[] = [];\n\n  constructor(props: TweenProps) {\n    super(props);\n\n    this.addTarget = this.addTarget.bind(this);\n  }\n\n  componentDidMount() {\n    this.createTween();\n\n    // props at mount\n    setProps(this.tween, this.props);\n    setInitialPlayState(this.tween, this.props);\n\n    this.context.registerConsumer(this);\n  }\n\n  componentWillUnmount() {\n    if (this.tween) {\n      this.tween.kill();\n    }\n  }\n\n  getSnapshotBeforeUpdate() {\n    this.targets = [];\n    return null;\n  }\n\n  componentDidUpdate(prevProps: TweenProps) {\n    const {\n      children,\n      wrapper,\n\n      duration,\n      from,\n      to,\n      stagger,\n\n      progress,\n      totalProgress,\n      playState,\n      disabled,\n      onlyInvalidateTo,\n\n      onCompleteAll,\n      onCompleteAllParams,\n      onCompleteAllScope,\n      onStartAll,\n\n      position,\n      target,\n\n      ...vars\n    } = this.props;\n\n    // if children change create a new tween\n    // TODO: replace easy length check with fast equal check\n    if (React.Children.count(prevProps.children) !== React.Children.count(children)) {\n      this.createTween();\n    }\n\n    if (disabled) {\n      return;\n    }\n\n    // execute function calls\n    setProps(this.tween, this.props, prevProps);\n\n    // if \"to\" props are changed: reinit and restart tween\n    if (!isEqual(to, prevProps.to)) {\n      // is Tween\n      if (!this.tween.getChildren) {\n        this.tween.vars = { ...to, ...vars };\n\n        if (onlyInvalidateTo) {\n          var progressTmp = this.tween.progress();\n          this.tween\n            .progress(0)\n            .invalidate()\n            .progress(progressTmp);\n        } else {\n          this.tween.invalidate();\n        }\n      }\n      // is Timeline\n      // TODO: not yet ready\n      else {\n        let delay = 0;\n        this.tween.getChildren(false, true, false).forEach((tween: any) => {\n          tween.vars = { ...to, ...vars, ...{ delay } };\n          tween.invalidate();\n          // delay += stagger || 0;\n        });\n      }\n\n      if (!this.tween.paused()) {\n        this.tween.restart();\n      }\n    }\n\n    setPlayState(playState, prevProps.playState, this.tween);\n  }\n\n  createTween() {\n    if (this.tween) {\n      this.tween.kill();\n    }\n\n    if (this.props.children) {\n      this.tween = getTweenFunction(this.targets, this.props, this.context);\n    } else {\n      // why this is needed?\n      this.tween = () => {};\n    }\n  }\n\n  getGSAP() {\n    return this.tween;\n  }\n\n  setGSAP(tween: any) {\n    this.tween = tween;\n  }\n\n  addTarget(target: any) {\n    // target is null at unmount\n    if (target !== null) {\n      this.targets.push(target);\n    }\n  }\n\n  getTargets() {\n    return this.targets;\n  }\n\n  render() {\n    let { children, wrapper } = this.props;\n\n    const output = (\n      <Fragment>\n        {React.Children.map(children, child => {\n          return React.cloneElement(child as ReactElement, getRefProp(child, this.addTarget));\n        })}\n      </Fragment>\n    );\n\n    if (wrapper) {\n      return React.cloneElement(wrapper, [], output);\n    }\n\n    return output;\n  }\n}\n\nexport default Tween;\n","import React, { Fragment, ReactElement, ReactNode } from 'react';\nimport { gsap } from 'gsap';\nimport { isForwardRef, isFragment } from 'react-is';\nimport { PlayState } from './types';\nimport {\n  getInitialPaused,\n  getTargetRefProp,\n  getTweenFunction,\n  nullishCoalescing,\n  setInitialPlayState,\n  setPlayState,\n  setProps,\n} from './helper';\nimport Provider, { Context } from './Provider';\nimport { TweenProps } from './Tween';\n\ntype Label = {\n  label: string;\n  position: string | number;\n};\n\nexport type Targets = Map<string | number, ReactElement | ReactElement[]>;\nexport type TargetsRef = {\n  set: (key: string, target: any) => void;\n};\n\nexport type Target = ReactElement | null;\n\nexport type TimelineProps = {\n  children: ReactNode;\n  wrapper?: ReactElement;\n  target?: Target;\n  position?: string | number;\n  labels?: Label[];\n\n  duration?: number;\n  progress?: number;\n  totalProgress?: number;\n  playState?: PlayState;\n\n  [prop: string]: any;\n};\n\nclass Timeline extends Provider<TimelineProps> {\n  static displayName = 'Timeline';\n\n  timeline: any;\n  targets: Targets = new Map();\n\n  static defaultProps = {\n    playState: PlayState.play,\n  };\n\n  constructor(props: TimelineProps) {\n    super(props);\n\n    this.addTarget = this.addTarget.bind(this);\n    this.setTarget = this.setTarget.bind(this);\n  }\n\n  componentDidMount() {\n    this.createTimeline();\n\n    // props at mount\n    setProps(this.timeline, this.props);\n    setInitialPlayState(this.timeline, this.props);\n\n    this.context.registerConsumer(this);\n  }\n\n  componentWillUnmount() {\n    this.timeline.kill();\n  }\n\n  getSnapshotBeforeUpdate() {\n    this.targets = new Map();\n    return null;\n  }\n\n  componentDidUpdate(prevProps: TimelineProps) {\n    const { children, duration, progress, totalProgress, playState, target } = this.props;\n\n    // if children change create a new timeline\n    // TODO: replace easy length check with fast equal check\n    // TODO: same for props.target?\n    if (React.Children.count(prevProps.children) !== React.Children.count(children)) {\n      this.createTimeline();\n    }\n\n    // execute function calls\n    setProps(this.timeline, this.props, prevProps);\n\n    // TODO: need rerender or something if target change?\n    // if (target !== prevProps.target) {\n    //   this.forceUpdate();\n    // }\n\n    setPlayState(playState, prevProps.playState, this.timeline);\n  }\n\n  createTimeline() {\n    const {\n      children,\n      target,\n      duration,\n      progress,\n      totalProgress,\n      playState,\n      labels,\n      position,\n      ...vars\n    } = this.props;\n\n    if (this.timeline) {\n      this.timeline.kill();\n    }\n\n    const plugins = this.context?.getPlugins(this.context?.plugins, this.targets) ?? {};\n\n    // init timeline\n    this.timeline = gsap.timeline({\n      smoothChildTiming: true,\n      paused: getInitialPaused(playState),\n      ...vars,\n      ...plugins,\n    });\n\n    if (labels) {\n      labels.forEach(label => {\n        this.timeline.addLabel(label.label, label.position);\n      });\n    }\n\n    // add tweens or nested timelines to timeline\n    this.consumers.forEach(consumer => {\n      // Tween with no children -> control Timeline target\n      if (consumer.tween && !consumer.props.children) {\n        const { position, target, stagger, ...vars } = consumer.props as TweenProps;\n\n        // get target if not nullish\n        let targets = null;\n        if (target !== null && typeof target !== 'undefined') {\n          targets = this.targets.get(target);\n        }\n\n        // if no target found -> take all Timeline targets as target\n        const tween = getTweenFunction(\n          // @ts-ignore\n          nullishCoalescing(targets, Array.from(this.targets.values())),\n          {\n            stagger,\n            ...vars,\n          }\n        );\n        this.timeline.add(tween, nullishCoalescing(position, '+=0'));\n        consumer.setGSAP(tween);\n      } else {\n        const { position } = consumer.props;\n        this.timeline.add(consumer.getGSAP(), nullishCoalescing(position, '+=0'));\n      }\n    });\n  }\n\n  getGSAP() {\n    return this.timeline;\n  }\n\n  addTarget(target: any) {\n    if (target !== null) {\n      this.targets.set(this.targets.size, target);\n    }\n  }\n\n  setTarget(key: string, target: any) {\n    if (target !== null) {\n      if (this.targets.has(key)) {\n        const targets = this.targets.get(key);\n        if (Array.isArray(targets)) {\n          this.targets.set(key, [...targets, target]);\n        } else {\n          this.targets.set(key, [targets, target]);\n        }\n      } else {\n        this.targets.set(key, target);\n      }\n    }\n  }\n\n  setTargets(targets: Targets) {\n    this.targets = targets;\n  }\n\n  getTargets() {\n    return this.targets;\n  }\n\n  cloneElement(child: any) {\n    // @ts-ignore\n    return React.cloneElement(child, getTargetRefProp(child, this.setTarget, this.addTarget));\n  }\n\n  renderTarget(target?: Target): ReactNode {\n    if (!target) {\n      return null;\n    }\n\n    // if is forwardRef clone and pass targets as ref\n    if (isForwardRef(target)) {\n      return this.cloneElement(target);\n    }\n\n    // else iterate the first level of children and set targets\n    return (\n      <Fragment>\n        {/* First render the target */}\n        {React.Children.map<ReactElement, ReactElement>(target, child => {\n          if (isFragment(child)) {\n            return React.Children.map(child.props.children, fragmentChild => {\n              return this.cloneElement(fragmentChild);\n            });\n          }\n          return this.cloneElement(child);\n        })}\n      </Fragment>\n    );\n  }\n\n  render() {\n    let { target, children, wrapper } = this.props;\n\n    const renderedTarget = this.renderTarget(target);\n\n    let output = (\n      <Fragment>\n        {renderedTarget}\n        {children}\n      </Fragment>\n    );\n\n    if (wrapper) {\n      output = React.cloneElement(wrapper, [], output);\n    }\n\n    return this.renderWithProvider(output);\n  }\n}\n\nexport default Timeline;\n","import React from 'react';\nimport { gsap } from 'gsap';\nimport { nullishCoalescing } from '../helper';\nimport Provider from '../Provider';\n\nexport type RevealProps = {\n  children: React.ReactNode;\n  trigger: React.ReactElement | null;\n  repeat: boolean;\n  root: Element | null;\n  rootMargin: string;\n  threshold: number;\n};\n\nenum EntryState {\n  unknown,\n  entered,\n  exited,\n}\n\nclass Reveal extends Provider<RevealProps> {\n  static displayName = 'Reveal';\n\n  static defaultProps = {\n    trigger: null,\n    repeat: false,\n    root: null,\n    rootMargin: '0px',\n    threshold: 0.66,\n  };\n\n  timeline: any;\n  triggerRef: HTMLElement | null = null;\n  observer: IntersectionObserver | null = null;\n\n  init() {\n    this.createTimeline();\n    this.createIntersectionObserver();\n  }\n\n  kill() {\n    this.killTimeline();\n    this.killIntersectionObserver();\n  }\n\n  componentDidMount() {\n    this.init();\n  }\n\n  componentWillUnmount() {\n    this.kill();\n  }\n\n  componentDidUpdate(prevProps: RevealProps) {\n    const { children, trigger } = this.props;\n\n    // if children change create a new timeline\n    // TODO: replace easy length check with fast equal check\n    // TODO: same for props.target?\n    if (React.Children.count(prevProps.children) !== React.Children.count(children)) {\n      this.init();\n    }\n\n    if (prevProps.trigger !== trigger) {\n      this.init();\n    }\n  }\n\n  createTimeline() {\n    this.killTimeline();\n\n    // init timeline\n    this.timeline = gsap.timeline({\n      smoothChildTiming: true,\n      paused: true,\n    });\n\n    // add consumers\n    this.consumers.forEach(consumer => {\n      const { position } = consumer.props;\n      this.timeline.add(consumer.getGSAP().play(), nullishCoalescing(position, 0));\n    });\n  }\n\n  killTimeline() {\n    if (this.timeline) {\n      this.timeline.kill();\n    }\n  }\n\n  createIntersectionObserver() {\n    let { root, rootMargin, threshold } = this.props;\n\n    const options = {\n      root,\n      rootMargin,\n      threshold: [0, threshold],\n    };\n\n    this.observer = new IntersectionObserver(this.intersectionObserverCallback, options);\n\n    // It would be better if we wouldn't need an extra wrapper.\n    // But it can be problematic for example with a fadeInLeft animation\n    // were the element is out of the viewport in the initial state.\n    // In this case there wouldn't be an intersection..\n    if (!this.triggerRef) {\n      this.consumers.forEach(consumer => {\n        consumer.getTargets().forEach((target: any) => {\n          this.observer && this.observer.observe(target);\n        });\n      });\n    } else {\n      this.observer && this.observer.observe(this.triggerRef);\n    }\n  }\n\n  killIntersectionObserver() {\n    this.unobserveAll();\n    this.observer = null;\n  }\n\n  unobserveAll() {\n    if (this.observer) {\n      if (!this.triggerRef) {\n        this.consumers.forEach(consumer => {\n          consumer.getTargets().forEach((target: any) => {\n            this.observer && this.observer.unobserve(target);\n          });\n        });\n      } else {\n        this.observer && this.observer.unobserve(this.triggerRef);\n      }\n    }\n  }\n\n  intersectionObserverCallback = (entries: any) => {\n    let { repeat, threshold } = this.props;\n    let state: EntryState = EntryState.unknown;\n\n    for (const entry of entries) {\n      if (entry.isIntersecting && entry.intersectionRatio >= threshold) {\n        this.timeline.play();\n        state = EntryState.entered;\n        break;\n      } else if (!entry.isIntersecting) {\n        state = EntryState.exited;\n        break;\n      }\n    }\n\n    if (!repeat && state === EntryState.entered) {\n      this.killIntersectionObserver();\n    } else if (repeat && state === EntryState.exited) {\n      this.timeline.pause(0);\n    }\n  };\n\n  getGSAP() {\n    return this.timeline;\n  }\n\n  render() {\n    let { children, trigger } = this.props;\n\n    let output = trigger ? (\n      <trigger.type {...trigger.props} ref={(trigger: HTMLElement) => (this.triggerRef = trigger)}>\n        {children}\n      </trigger.type>\n    ) : (\n      children\n    );\n\n    return this.renderWithProvider(output);\n  }\n}\n\nexport default Reveal;\n","import React from 'react';\nimport { gsap } from 'gsap';\nimport { ScrollTrigger as ScrollTriggerPlugin } from 'gsap/dist/ScrollTrigger';\nimport Provider, { Context } from '../Provider';\n\ngsap.registerPlugin(ScrollTriggerPlugin);\n\nexport type ScrollTriggerProps = {\n  children?: React.ReactNode;\n} & gsap.plugins.ScrollTriggerInstanceVars;\n\nclass ScrollTrigger extends Provider<ScrollTriggerProps> {\n  static displayName = 'ScrollTrigger';\n  static contextType = Context;\n\n  scrollTrigger: any | null = null;\n  targets: any = {};\n\n  constructor(props: ScrollTriggerProps) {\n    super(props);\n\n    this.getPlugin = this.getPlugin.bind(this);\n  }\n\n  // override and pass registerConsumer to next parent provider\n  registerConsumer(consumer: any) {\n    this.context.registerConsumer(consumer);\n  }\n\n  componentDidMount() {\n    const { children, ...scrollTrigger } = this.props;\n\n    if (!children) {\n      this.scrollTrigger = ScrollTriggerPlugin.create(scrollTrigger);\n    }\n  }\n\n  componentWillUnmount() {\n    if (this.scrollTrigger) {\n      this.scrollTrigger.kill();\n    }\n  }\n\n  // componentDidUpdate(prevProps: ScrollTriggerProps) {\n  //   const { trigger } = this.props;\n  //\n  //   if (trigger !== prevProps.trigger) {\n  //     console.log('prevProps.trigger', prevProps.trigger);\n  //     console.log('trigger', trigger);\n  //   }\n  // }\n\n  getGSAP() {\n    return this.scrollTrigger;\n  }\n\n  getPlugin(props: any, targets: any) {\n    let { children, trigger: triggerProp, ...scrollTrigger } = props;\n\n    let trigger = triggerProp;\n\n    if (targets instanceof Map) {\n      if (trigger) {\n        const target = targets.get(trigger);\n        if (target) {\n          trigger = target;\n        }\n      } else {\n        trigger = Array.from(targets.values());\n      }\n    } else if (!trigger) {\n      trigger = targets;\n    }\n\n    return {\n      trigger,\n      ...scrollTrigger,\n    };\n  }\n\n  render() {\n    const { children, ...scrollTrigger } = this.props;\n    if (!children) {\n      return null;\n    }\n    return this.renderWithProvider(children, {\n      scrollTrigger,\n    });\n  }\n}\n\nexport default ScrollTrigger;\n","import React from 'react';\n\ntype SplitWordsProps = {\n  children: React.ReactNode;\n  wrapper: React.ReactElement;\n  delimiter?: string;\n};\n\ntype SplitCharsProps = {\n  children: React.ReactNode;\n  wrapper: React.ReactElement;\n};\n\nconst escapeRegExp = (regExp: string) => {\n  var specialChars = ['$', '^', '*', '(', ')', '+', '[', ']', '{', '}', '\\\\', '|', '.', '?', '/'];\n  var regex = new RegExp('(\\\\' + specialChars.join('|\\\\') + ')', 'g');\n  return regExp.replace(regex, '\\\\$1');\n};\n\n// TODO: possible or better to output all the refs as one array?\nexport const SplitWords = React.forwardRef<any, SplitWordsProps>(\n  ({ children, wrapper, delimiter = ' ' }, ref) => {\n    if (typeof children !== 'string') {\n      throw new Error('SplitWords only accepts a string as child.');\n    }\n    const words = children.split(new RegExp(`(${escapeRegExp(delimiter)})`, 'g'));\n    return (\n      <>\n        {words.map((word: string, i: number) => {\n          if (delimiter === ' ' && word === delimiter) {\n            return <React.Fragment key={i}> </React.Fragment>;\n          }\n          return React.cloneElement(wrapper, { ref, key: i }, word);\n        })}\n      </>\n    );\n  }\n);\n\n// TODO: possible or better to output all the refs as one array?\nexport const SplitChars = React.forwardRef<any, SplitCharsProps>(({ children, wrapper }, ref) => {\n  if (typeof children !== 'string') {\n    throw new Error('SplitChars only accepts a string as child.');\n  }\n  return (\n    <>\n      {children\n        .split(\n          /(?=(?:[\\0-\\uD7FF\\uE000-\\uFFFF]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF]))/\n        )\n        .map((char: string, i: number) => {\n          // TODO: enhance check for space\n          if (char === ' ') {\n            return <React.Fragment key={i}> </React.Fragment>;\n          }\n          return React.cloneElement(wrapper, { ref, key: i }, char);\n        })}\n    </>\n  );\n});\n\nexport const SplitLetters = React.forwardRef((props: any, ref) => {\n  console.warn('Deprecation warning: Use SplitChars instead of SplitLetters');\n  return <SplitChars {...props} ref={ref} />;\n});\n","import React from 'react';\nimport { PlayState } from './../types';\nimport { setPlayState } from './../helper';\nimport Provider from '../Provider';\n\ntype ControlsProps = {\n  playState?: PlayState;\n};\n\ntype ControlsState = {\n  totalProgress: number;\n  playState?: PlayState;\n  prevPlayState?: PlayState;\n};\n\nclass Controls extends Provider<ControlsProps, ControlsState> {\n  gsap: any;\n  slider: any;\n  sliderTouched: boolean = false;\n\n  state = {\n    totalProgress: 0,\n    playState: undefined,\n    prevPlayState: undefined,\n  };\n\n  containerStyle = {\n    backgroundColor: '#f0f0f0',\n    padding: '10px 10px 0 10px',\n    marginTop: '10px',\n    position: 'relative' as 'relative',\n    zIndex: 2,\n    fontFamily: 'verdana, sans-serif',\n    fontSize: '16px',\n    border: '1px solid #ccc',\n  };\n\n  buttonContainerStyle = {\n    margin: '0',\n    display: 'flex',\n    flexWrap: 'wrap' as 'wrap',\n    justifyContent: 'space-between',\n  };\n\n  buttonStyle = {\n    border: '1px solid #999',\n    backgroundColor: '#f0f0f0',\n    padding: '5px',\n    margin: '10px 10px 10px 0',\n    cursor: 'pointer',\n  };\n\n  sliderStyle = {\n    margin: '0',\n    width: '100%',\n  };\n\n  playStateStyle = {\n    color: '#999',\n    margin: '10px 0',\n    fontSize: '14px',\n  };\n\n  componentDidMount() {\n    if (this.consumers.length) {\n      this.gsap = this.consumers[0];\n\n      const gsap = this.gsap.getGSAP();\n\n      if (gsap) {\n        gsap.eventCallback('onUpdate', this.onUpdate);\n\n        if (this.props.playState) {\n          this.setPlayState(this.props.playState);\n        } else {\n          // get child initial state\n          if (gsap.paused()) {\n            this.setPlayState(PlayState.pause);\n          } else if (gsap.reversed()) {\n            this.setPlayState(PlayState.reverse);\n          } else {\n            this.setPlayState(PlayState.play);\n          }\n        }\n\n        const totalProgress = gsap.totalProgress();\n        this.slider.value = totalProgress * 100;\n      }\n    }\n  }\n\n  componentDidUpdate() {\n    this.onUpdate();\n  }\n\n  onUpdate = () => {\n    if (this.gsap && this.slider && !this.sliderTouched) {\n      const totalProgress = this.gsap.getGSAP().totalProgress();\n      this.slider.value = totalProgress * 100;\n    }\n  };\n\n  onChange = (event: any) => {\n    if (this.gsap && this.gsap.getGSAP()) {\n      this.gsap.getGSAP().totalProgress(event.target.value / 100);\n    }\n  };\n\n  setPlayState = (state: PlayState) => {\n    this.setState(prevState => {\n      return {\n        playState: state,\n        prevPlayState: prevState.playState,\n      };\n    });\n  };\n\n  getControls = (_totalProgress: any, playState: PlayState | undefined) => (\n    <div style={this.containerStyle}>\n      <input\n        ref={el => (this.slider = el)}\n        type=\"range\"\n        style={this.sliderStyle}\n        step=\"0.001\"\n        onChange={e => this.onChange(e)}\n        onMouseDown={() => (this.sliderTouched = true)}\n        onMouseUp={() => (this.sliderTouched = false)}\n      />\n      <div style={this.buttonContainerStyle}>\n        <div>\n          <button\n            type=\"button\"\n            style={this.buttonStyle}\n            onClick={() => this.setPlayState(PlayState.play)}\n          >\n            Play\n          </button>\n          <button\n            type=\"button\"\n            style={this.buttonStyle}\n            onClick={() => this.setPlayState(PlayState.reverse)}\n          >\n            Reverse\n          </button>\n          <button\n            type=\"button\"\n            style={this.buttonStyle}\n            onClick={() => this.setPlayState(PlayState.pause)}\n          >\n            Pause\n          </button>\n          <button\n            type=\"button\"\n            style={this.buttonStyle}\n            onClick={() => this.setPlayState(PlayState.stop)}\n          >\n            Stop\n          </button>\n        </div>\n        <span style={this.playStateStyle}>{playState}</span>\n      </div>\n    </div>\n  );\n\n  render() {\n    const { children } = this.props;\n    const { totalProgress, playState, prevPlayState } = this.state;\n\n    if (this.gsap) {\n      setPlayState(playState, prevPlayState, this.gsap.getGSAP());\n    }\n\n    return this.renderWithProvider(\n      <div>\n        {children}\n        {this.getControls(totalProgress, playState)}\n      </div>\n    );\n  }\n}\n\nexport default Controls;\n"],"names":["PlayState","String","prototype","startsWith","searchString","position","indexOf","setPlayState","playState","prevPlayState","tween","play","restart","reverse","restartReverse","stop","pause","stopEnd","resume","setInitialPlayState","tweenOrTimeline","props","getInitialPaused","getTweenFunction","targets","context","duration","from","to","stagger","progress","disabled","onCompleteAll","onCompleteAllParams","onCompleteAllScope","onStartAll","vars","tweenFunction","paused","plugins","getPlugins","gsap","fromTo","Array","isArray","forEach","t","timeline","tweens","smoothChildTiming","onComplete","onCompleteParams","onCompleteScope","onStart","isEqual","obj1","obj2","JSON","stringify","getReactNode","dom","traverseUp","key","Object","keys","find","domFiber","_currentElement","compFiber","_owner","i","_instance","stateNode","getCompFiber","fiber","parentFiber","type","getRefProp","child","addTarget","innerRef","target","current","ref","setOrAddTarget","setTarget","reactNode","elementRef","singleRef","getTargetRefProp","nullishCoalescing","value","ifNullish","setProps","prevProps","undefined","totalProgress","Context","React","createContext","registerConsumer","Provider","consumers","bind","getContextValue","getPlugin","renderWithProvider","consumer","push","plugin","reduce","acc","hasOwnProperty","call","output","Component","_interpolate","_getProp","_getGSAP","window","registerPlugin","getDistance","p1","p2","Math","sqrt","pow","x","y","getCircleLength","el","PI","parseFloat","getAttribute","getRectLength","getLineLength","getPolylineLength","points","totalLength","previousPos","numberOfItems","currentPos","getItem","getPolygonLength","getPathLength","hasAttribute","getTotalLength","d","pathString","replace","paths","split","filter","path","map","length","maxLength","pathElement","document","createElementNS","setAttribute","max","tagName","toLowerCase","SvgDrawPlugin","version","name","register","core","Plugin","propTween","utils","interpolate","getProperty","init","_tween","index","lengthParam","offsetParam","data","strokeDashoffset","strokeDasharray","render","_format","CountPlugin","parseInt","toString","inputValue","format","initialCount","innerText","count","Tween","componentDidMount","createTween","componentWillUnmount","kill","getSnapshotBeforeUpdate","componentDidUpdate","children","wrapper","onlyInvalidateTo","Children","getChildren","progressTmp","invalidate","delay","getGSAP","setGSAP","getTargets","Fragment","cloneElement","Timeline","Map","createTimeline","labels","label","addLabel","get","values","add","set","size","has","setTargets","renderTarget","isForwardRef","isFragment","fragmentChild","renderedTarget","EntryState","Reveal","entries","repeat","threshold","state","unknown","entry","isIntersecting","intersectionRatio","entered","exited","killIntersectionObserver","createIntersectionObserver","killTimeline","trigger","root","rootMargin","options","observer","IntersectionObserver","intersectionObserverCallback","triggerRef","observe","unobserveAll","unobserve","ScrollTriggerPlugin","ScrollTrigger","scrollTrigger","create","triggerProp","escapeRegExp","regExp","specialChars","regex","RegExp","join","SplitWords","forwardRef","delimiter","Error","words","word","SplitChars","char","SplitLetters","console","warn","Controls","backgroundColor","padding","marginTop","zIndex","fontFamily","fontSize","border","margin","display","flexWrap","justifyContent","cursor","width","color","slider","sliderTouched","event","setState","prevState","_totalProgress","style","containerStyle","sliderStyle","step","onChange","e","onMouseDown","onMouseUp","buttonContainerStyle","buttonStyle","onClick","playStateStyle","eventCallback","onUpdate","reversed","getControls"],"mappings":"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"}